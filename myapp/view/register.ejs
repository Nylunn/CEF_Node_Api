<div style="display: flex; justify-content: center; margin-top: 200px;">
    <form method="post" action="http://localhost:3000/users/add" enctype="multipart/form-data">
        <fieldset style="width: 280px; height: 360px; text-align: center; background-color: grey; font-size: 20px; font-family: Poppins; border-radius: 20px;">
            <div>
            <legend>Veuillez vous enregister :</legend> <br>
            <label for="email" >Email</label> <br>
            <input type="email" name="email" required="true" placeholder="email@gmail.com"> <br> <br>
            <label for="password" >Mot de passe</label> <br>
            <input type="password" name="password" required="true" placeholder="motdepasse"> <br> <br>
            <label for="name" >Nom</label> <br>
            <input type="name" name="name" required="true" placeholder="Mathéo" > <br> <br>
            </div>
            <input type="submit" value="S'inscrire"  style="color: white; background-color: black; width: 100px; height: 30px; border-radius: 20px; font-size: 15px; font-family: Poppins;">
            <br> <a href="./">Retour à l'acceuil</a>
        </fieldset>
    </form>
        
    </div>



<script>
    document.getElementById('registrationForm').addEventListener('submit', async function(event) {
        event.preventDefault(); 
        // Empêche la soumission traditionnelle du formulaire
    
        // Récupération des valeurs du formulaire
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        const name = document.getElementById('name').value;
    
        try {
            // Envoi des données à votre API
            const response = await fetch('http://localhost:3000/users/add', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    email: email,
                    password: password,
                    name: name
                })
            });
    
            // Vérification de la réponse
            if (response.ok) {
                const result = await response.json();
                alert('Inscription réussie !');
                // Redirection ou action après inscription réussie
            } else {
                // Gestion des erreurs
                const errorData = await response.json();
                alert('Erreur lors de l\'inscription : ' + (errorData.message || 'Erreur inconnue'));
            }
        } catch (error) {
            console.error('Erreur:', error);
            alert('Une erreur est survenue lors de l\'envoi des données');
        }
    });
    </script>